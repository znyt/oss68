    <!--go-->孙轶民回顾了刚才与柳荣华的探讨中提到的内容：在免费模式网络游戏的生态系统中，免费玩家（不花人民币的玩家）的经济来源无非是三种。<br/><br/>    一是完成每日任务，拿NPC奖励的经验和金币，以及获取副本里可能掉落的一些珍稀物品。<br/><br/>    二是采集生活材料（如药材或者矿石）并制作日常生活消耗品（药品或宝石成品）出售赚钱。<br/><br/>    三是反复刷高级副本，以求小概率获取最新款的极品装备。<br/><br/>    第一种方式收入有限。因为一般来说副本任务一天只有一次。即便任务完成后也可以再进副本，但因为没有了经验值和金币奖励，这种劳动明显不划算。<br/><br/>    关于第二种方式，就孙轶民自己而言，目前除了采集药材，偶尔墨澜会带他和神女去浮玉山矿洞挖宝石矿，这里能产生小部分收入。但毕竟墨澜不会天天带他去，所以主要的生活来源还是采药。<br/><br/>    第三种方式他也不看好，因为刷高级副本太费时费力，而且出极品的概率太小。即便能出，能被自己获取的概率也很小，毕竟一个队伍有6个人。<br/><br/>    其实在这个游戏世界中，上述第二种赚钱方式是广大免费玩家在游戏生存的主要方式。一是因为采集药材操作难度比较低，二是因为药品作为一种生活消耗品的需求是源源不断的，所以采集的药材或者加工好的药品，总能卖出去。<br/><br/>    但是，采集药材需要机械式的重复动作，过程会比较乏味与辛苦。即便再有耐心的人，连续采集个2小时也便承受不了。<br/><br/>    如若考虑用程序代替手工，那么这个问题就迎刃而解了。程序不会觉得累，也不会觉得枯燥无聊。它可以24小时不间断的连续劳作无需休息。而且不需要支付酬劳。也没有成本——它不需要吃饭，顶多是多赔点电费。<br/><br/>    如果从程序设计难度来讲，第二种方式也是最合适的。因为其他两种都要涉及到与别的玩家配合以及应付副本里的复杂多变的情况，程序设计难度极高。<br/><br/>    采集药材有两种方式：一是在最新的70级地图野外区域采集普通7级药材，然后直接出售，或者制作成药品成品出售。<br/><br/>    第二种是到浮玉山采集特殊药材碧芙蓉。【碧芙蓉】这种药材是用来制作特殊药品大还丹的。但是普通地图野外区域只有极小概率出现碧芙蓉，而浮玉山却有较多分布。<br/><br/>    碧芙蓉的价格是普通药材的十倍左右。这样的高额利润诱惑之下，很多人喜欢前往浮玉山冒险采集。<br/><br/>    之所以说冒险，是因为浮玉山属于危险的“开放性地图”，在这里，异帮人员之间无需开启攻击模式便可以任意攻击且不增加罪恶值。因此在浮玉山采集药材随时会遭遇攻击，经常有玩家为了争几棵草药争得头破血流。正因为如此，孙轶民和神女平时几乎都不会去那里采集。<br/><br/>    对于计算机程序来说，更是无法应对浮玉山这种复杂情况。所以他的思路中暂时排除了浮玉山，决定先考虑设计在普通地图采集药材的程序。<br/><br/>    仔细思索一番，其实这个程序设计难度并不高。大致思路就是：在野外地图按照一定的路线巡逻，搜索可以采集的药材的位置，然后前往目标附近，实施采集动作。<br/><br/>    如何识别野外地图的药材生长的位置？药材在地图上是随机生长的。因此，需要程序灵活判断。这里的解决方案，基于对服务器返回的实时数据的解读。<br/><br/>    按照孙轶民在光潋开发游戏的实践中了解到的网游运行的工作原理，角色接受周围视野范围内的信息的是实时动态的。<br/><br/>    具体来说：随着角色在地图上的移动，以角色为中心的附近一定距离范围内（视野范围内）的实时情况会以数据形式从服务器发送到客户端，这些数据包括附近的玩家角色，怪物，资源等等信息。<br/><br/>    客户端根据这些数据，动态更新玩家角色视野范围内的图形内容。<br/><br/>    在这些数据信息中自然可以找到药材位置的相关内容。基于黎允儿提供的数据解码模块，做到这一点并没有障碍。<br/><br/>    获取到药材的位置信息后，程序便可以通过发送模拟的键盘和鼠标消息，操纵角色移动到目标位置，并实施采集动作。<br/><br/>    那么还要解决如何持续采集的问题。<br/><br/>    由于药材被采集之后需要一段时间后才能重新生长出来，因此，如果长时间在一个位置附近采集，必然最终会导致视野范围内所有药材被采集完毕。此时，可以让程序驱动角色移动到另一片区域。<br/><br/>    那么如何选择移动方向？可以随机选择一个方向直线前进，直到视野范围内出现可以采集的药材为止。<br/><br/>    当然，这样的搜索方式有些笨，效率不一定高。不过作为第一版程序，先采用这个笨办法也无妨，后续可以改进。<br/><br/>    程序设计的大致思路就是如此。<br/><br/>    关于采集的具体过程，程序面临两个问题需要解决：一是采集药材的过程中会有小怪骚扰纠缠，二是有可能容易遭遇敌对玩家攻击。三是野外也有一定的小概率出现精英怪物，以及周日出现的世界boss。<br/><br/>    关于第一个问题，相对于襄王的战力水平而言，野外的普通怪物对人物攻击造成的伤害非常有限，不会致命，襄王原本可以不用理会。但问题是，采集一颗草药的动作过程，需要3.5秒的时间，在这个时间内，如果遭到野外小怪的攻击，则动作被打断则会导致采集失败。所以程序要做的是：如果检测到遭到角色正在遭受小怪骚扰攻击，那么先启动战斗功能杀死怪物。<br/><br/>    这里的战斗功能设计并不难，因为需要对付的是战斗力不高的普通小怪，不需要讲究战斗策略，只要简单的按顺序循环施放所有攻击技能即可。可以照搬演奏家的“硬怼”战斗模式。<br/><br/>    关于第二个问题，因为孙轶民的仇家不多，因此出现这个情况的概率不高。他暂时不做考虑。<br/><br/>    而且，应对这种情况的程序设计会比较复杂，就如同帮助柳荣华设计的刺客程序一般，他需要根据自己霸王的职业特点，以及战斗对手的职业特点，制定专用的战斗策略。因为战斗对手可能是任何职业的，因此这个程序涉及到的内容就比较繁琐复杂，设计也比较费时间，他暂时不做考虑。<br/><br/>    如若真遇到玩家挑衅攻击，那么一个简单的处理方案就是让角色先逃跑回到安全区。然后换一个地方继续采集。毕竟赚钱比打架重要。<br/><br/>    关于第三个问题。同样采取躲避措施，精英怪物的攻击与防御能力都高于普通怪物，光凭襄王一个人很难应付，即便能杀死它，也会耗费大量时间。<br/><br/>    世界boss更不用说了。所以，遇到这种情况就先逃跑。直到把怪物甩开，换一个地方继续采集。<br/><br/>    另外，因为考虑到采摘之后要拾取药材到包裹里，孙轶民将原有小跟班程序的代码功能合并了进来。于是，不管是采集的药材，还是打小怪掉落的物品，程序都会都自动拾取到包裹里。<br/><br/>    经过初步思考，程序的可行性得到了论证。<br/><br/>    这个思考过程让他也联想到了，网上其实也存在一些类似的辅助工具，诸如“按键精灵”。它们也能通过预设的脚本来完成一定的自动化任务，但是仅限于完成一些简单的机械化操作。<br/><br/>    这些辅助程序和孙轶民要制作的这个程序有着本质区别：它们无法解读游戏服务器反馈过来的数据，从而不能应付野外采集这样的复杂功能。<br/><br/>    举例来说，按键精灵无法判断野外药草随机生长的位置，也无法获取角色自身所处的位置，生命值，周围的怪物情况等等信息。没有这些信息，自然无法实现自动采集。<br/><br/>    而孙轶民开发的辅助程序是基于对服务器返回数据的解读的，所以就能做出各种智能化的操作，因而能应付自动采集药材这样的复杂任务。<br/><br/>    说干就干，他打开了VC60，迅速建好了程序框架。他给程序取名“采集精灵”，设定两个快捷键：f11启动采集，f12暂停采集。<br/><br/>    接着便开始写具体代码。<br/><br/>    明日是周日无需上班，这一晚他满怀激情马不停蹄得工作了夜里3点，终于完成了自动采集程序的初步代码。<br/><br/>    然后做了一番简单的测试：他将襄王前往蟠龙山，然后启动程序，让它开始自动采集这里的7级药材，然后自己去煮了一包泡面吃。<br/><br/>    吃完回来看了一下，包裹里已经有了几颗草药。虽然不多，但这是他程序自动劳动的成果，这样的成果令他心中充满了兴奋与期待。<br/><br/>    睡前，他让采集精灵继续通宵工作，等待明早验证实际运作效果。他自己则带着兴奋上床，好不容易才睡去。<!--over--><br/><br/>